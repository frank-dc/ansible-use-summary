# 预处理器

## 简介
C 语言编译器在编译程序之前，会先使用预处理器（`preprocessor`）处理代码。

预处理器首先会清理代码，比如删除注释、多行语句合成一个逻辑行等。然后执行`#`开头的预处理指令。

习惯上，预处理指令放在代码的开头部分，`#`与预处理指令不留空白字符（如空格或制表符），预处理指令结尾处不需要分号。

## #pragam
用来修改编译器属性，以下示例让编译器以`C99`标准进行编译。
```c
#pragma c9x on
```

## #error
用于让预处理器抛出一个错误，终止编译。
```c
#if __STDC_VERSION__ != 201112L
    #error Not C11
#endif
```
```shell
$ gcc -std=c99 main.c
main.c:7:6: error: Not C11
```

## #define
用来将指定的词替换成另一个词。每条替换规则，称为一个`宏`（macro）。
```c
#define MAX 100
```
指定源代码里面的`MAX`（称为一个宏），全部替换成`100`。

作用是使得程序的可读性更好，也更容易修改。

`#define`允许多重替换，即一个宏可以包含另一个宏。
```c
#define TWO 2
#define FOUR TWO*TWO    // FOUR 会被替换成 2*2
```

> 注意，如果宏出现在字符串里，或是其他标识符的一部分，就会失效，并不会发生替换。

## 带参数的宏